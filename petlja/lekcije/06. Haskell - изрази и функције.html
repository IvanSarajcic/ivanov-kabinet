<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Основни појмови језика Haskell - Програмске парадигме</title>
    <link rel="stylesheet" href="../stil.css">
</head>
<body>
<main><nav><a href="../programske_paradigme.html">← Назад на листу лекција</a></nav><section id="haskell">
<h1>Основни појмови језика Haskell</h1>
</section>
<section id="id1">
<h1>Изрази</h1>
<p>Језик Haskell је чист функционални језик и као такав он не подржава
наредбе. Основни концепт чине изрази. Изрази се граде од променљивих и
константи применом разних операција и функција. Кренимо од
аритметичких (бројевних) израза. Подржане су целобројне константе (при
чему се могу користити произвољно велики бројеви) и реалне константе
(које се подразумевано записују као бројеви у покретном
зарезу). Основни <strong>нумерички типови</strong> које ћемо ми разматрати су:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Int</span></code> – „машински“ цели бројеви (записани са најмање 30 битова, најчешће са 32 или 64);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Integer</span></code> – неограничени цели бројеви;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Float</span></code> – бројеви у покретном зарезу једноструке тачности;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Double</span></code> – бројеви у покретном зарезу двоструке тачности.</p></li>
</ul>
<p>Типови се групишу у такозване <strong>класе типова</strong> (енг. <em>type classes</em>) –
њих не треба схватати као класе у објектно-оријентисаном
програмирању. Сви наведени нумерички типови припадају класи
<code class="docutils literal notranslate"><span class="pre">Num</span></code>. Сви ови бројеви су и реални бројеви па припадају класи
<code class="docutils literal notranslate"><span class="pre">Real</span></code>. Целобројни типови <code class="docutils literal notranslate"><span class="pre">Int</span></code> и <code class="docutils literal notranslate"><span class="pre">Integer</span></code> припадају и класи
<code class="docutils literal notranslate"><span class="pre">Integral</span></code>, док типови <code class="docutils literal notranslate"><span class="pre">Float</span></code> и <code class="docutils literal notranslate"><span class="pre">Double</span></code> припадају и класи
<code class="docutils literal notranslate"><span class="pre">Fractional</span></code>. Постоје и друге класе типова, које ћемо увести
касније, када се за њима јави потреба. Класе типова омогућавају да се
неке функције дефинишу полиморфно, тако да оперишу над подацима било
ког типа унутар неке класе. Ми нећемо често користити ову могућност,
али ће неколико таквих примера бити приказано када се за тим природно
јави потреба.</p>
<p>Подржане су и све основне аритметичке операције. На пример,</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">123456789</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">987654321</span>
<span class="mi">121932631112635269</span>

<span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span>
<span class="mf">2.5</span>

<span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0.2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span>
<span class="mf">0.6000000000000001</span>
</pre></div>
</div>
<p>Операција којом се израчунава целобројни количник представљена је
функцијом <code class="docutils literal notranslate"><span class="pre">div</span></code>, а остатак при дељењу функцијом <code class="docutils literal notranslate"><span class="pre">mod</span></code>. Функције се
пишу префиксно, али је функције два аргумента могуће писати и
инфиксно, тако што се запишу у оквиру обратних апострофа (на пример,
<code class="docutils literal notranslate"><span class="pre">mod</span> <span class="pre">12</span> <span class="pre">5</span></code> је исто што и <code class="docutils literal notranslate"><span class="pre">12</span> <span class="pre">`mod`</span> <span class="pre">5</span></code>).</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="n">div</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="mi">5</span>
<span class="mi">2</span>

<span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="p">`</span><span class="n">div</span><span class="p">`</span><span class="w"> </span><span class="mi">5</span>
<span class="mi">2</span>

<span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="p">`</span><span class="n">mod</span><span class="p">`</span><span class="w"> </span><span class="mi">5</span>
<span class="mi">3</span>
</pre></div>
</div>
<p>Применом релацијских оператора <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> и
<code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> на аритметичке изразе добијају се логичке вредности.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span>
<span class="kt">True</span>

<span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="mi">2</span>
<span class="kt">False</span>

<span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">2</span>
<span class="kt">False</span>
</pre></div>
</div>
<p>Логичке вредности се могу комбиновати применом логичких оператора
<code class="docutils literal notranslate"><span class="pre">not</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> и <code class="docutils literal notranslate"><span class="pre">||</span></code>.</p>
<p>Сложени изрази се могу учинити читљивијим употребом оператора
<code class="docutils literal notranslate"><span class="pre">let-in</span></code>. На пример, наредни израз израчунава износ који ће добити
запослени који је радио 4 дана за дневни бруто хонорар од 3700 динара,
ако се приликом исплате на бруто износ наплаћује порез од 20%.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="kr">let</span><span class="w"> </span><span class="n">broj_dana</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">4</span>
<span class="w">             </span><span class="n">dnevni_honorar</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">3700</span>
<span class="w">             </span><span class="n">bruto</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">broj_dana</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dnevni_honorar</span>
<span class="w">             </span><span class="n">porez</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span>
<span class="w">          </span><span class="kr">in</span><span class="w"> </span><span class="n">bruto</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">porez</span><span class="p">)</span>
<span class="mf">11840.0</span>
</pre></div>
</div>
<p>Нагласимо да променљиве које су уведене у <code class="docutils literal notranslate"><span class="pre">let-in</span></code> изразу нису
класичне променљиве на какве смо навикли у императивном програмирању и
не може им се мењати вредност. Можемо их схватити само као имена за
неке вредности.</p>
<p>Подржани су и условни изрази <code class="docutils literal notranslate"><span class="pre">if-then</span></code>, који одговарају тернарном
оператору <code class="docutils literal notranslate"><span class="pre">?:</span></code> у језику C# (а не наредби <code class="docutils literal notranslate"><span class="pre">if</span></code>).</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="mi">1</span>
<span class="mi">1</span>
</pre></div>
</div>
<p>Ниске су представљене типом <code class="docutils literal notranslate"><span class="pre">String</span></code> (који је заправо само синоним
за листу карактера). Константне ниске се записују између двоструких
наводника. Ниске се могу надовезати оператором <code class="docutils literal notranslate"><span class="pre">++</span></code>.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="s">"Zdravo"</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">" "</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">"svima"</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">"!"</span>
<span class="s">"Zdravo svima!"</span>
</pre></div>
</div>
<p>О нискама ће бити више речи у поглављу о листама.</p>
</section>
<section id="id2">
<h1>Дефинисање функција</h1>
<p>Кренимо од једноставне функције којом се израчунава обим квадрата чија
је дужина странице <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-1-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-1" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-2" class="mjx-mrow"><span id="MJXc-Node-3" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">a</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">a</script></span>. Обим се израчунава на основу формуле
<span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-2-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-4" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-5" class="mjx-mrow"><span id="MJXc-Node-6" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em;">O</span></span><span id="MJXc-Node-7" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span id="MJXc-Node-8" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">4</span></span><span id="MJXc-Node-9" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.344em;">⋅</span></span><span id="MJXc-Node-10" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">a</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo>=</mo><mn>4</mn><mo>⋅</mo><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">O = 4\cdot a</script></span>. Претпоставимо за почетак да је дужина квадрата
увек цео број.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">obim_kvadrata</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span>
<span class="nf">obim_kvadrata</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span>
</pre></div>
</div>
<p>Прва линија представља <strong>декларацију функције</strong> (каже се и <strong>потпис
типа функције</strong>, енг. <em>type signature</em> или <strong>опис типа</strong> или
<strong>спецификација типа</strong>). Њом се описује да се функција зове
<code class="docutils literal notranslate"><span class="pre">obim_kvadrata</span></code>, да прима један аргумент типа <code class="docutils literal notranslate"><span class="pre">Int</span></code> и да враћа
резултат типа <code class="docutils literal notranslate"><span class="pre">Int</span></code> (тип <code class="docutils literal notranslate"><span class="pre">Int</span> <span class="pre">-&gt;</span> <span class="pre">Int</span></code> је тип функције која има
један целобројни аргумент и израчунава целобројни резултат). Друга
линија је једнакост која представља дефиницију функције.</p>
<p>Када је ова функција дефинисана, можемо је позвати. На пример,</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">Prelude</span><span class="o">&gt;</span><span class="w"> </span><span class="n">obim_kvadrata</span><span class="w"> </span><span class="mi">5</span>
<span class="mi">20</span>
</pre></div>
</div>
<p>Пошто језик Haskell има механизам закључивања типова, прва линија је
опциона. Додуше, Haskell би закључио мало општији тип, јер оператор
<code class="docutils literal notranslate"><span class="pre">*</span></code> може да се примени и на друге бројевне типове (на пример, на
реалне бројеве тј. тип <code class="docutils literal notranslate"><span class="pre">Float</span></code> и <code class="docutils literal notranslate"><span class="pre">Double</span></code>). Ако бисмо сами
написали најопштији могући тип, функција би изгледала овако:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">obim_kvadrata</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span>
<span class="nf">obim_kvadrata</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span>
</pre></div>
</div>
<p>Ознака <code class="docutils literal notranslate"><span class="pre">a</span></code> означава било који тип (у питању је тзв. типска
променљива), па тип <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-&gt;</span> <span class="pre">a</span></code> означава функцију која прима аргумент
типа <code class="docutils literal notranslate"><span class="pre">a</span></code> и враћа вредност типа <code class="docutils literal notranslate"><span class="pre">a</span></code>. Међутим, тип <code class="docutils literal notranslate"><span class="pre">а</span></code> не може
бити било какав тип, већ мора бити бројевни тип да би подржао
операцију множења. Зато је пре типа <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-&gt;</span> <span class="pre">a</span></code> потребно навести
<strong>додатни услов</strong>, а то је да тип <code class="docutils literal notranslate"><span class="pre">a</span></code> мора да припада тзв. класи
типова <code class="docutils literal notranslate"><span class="pre">Num</span></code>, која означава бројевне типове. Дакле, опис типа <code class="docutils literal notranslate"><span class="pre">Num</span> <span class="pre">a</span> <span class="pre">=&gt;</span> <span class="pre">a</span> <span class="pre">-&gt;</span> <span class="pre">a</span></code>
читамо на следећи начин: функција прима аргумент неког
типа <code class="docutils literal notranslate"><span class="pre">a</span></code> и враћа вредност истог типа <code class="docutils literal notranslate"><span class="pre">a</span></code>, при чему тип <code class="docutils literal notranslate"><span class="pre">a</span></code> мора
припадати класи типова <code class="docutils literal notranslate"><span class="pre">Num</span></code>, тј. мора бити у питању неки бројевни
тип.</p>
<p>Дефинишимо сада функцију која израчунава обим правоугаоника чије су
дужине страница <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-3-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-11" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-12" class="mjx-mrow"><span id="MJXc-Node-13" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">a</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">a</script></span> и <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-4-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-14" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-15" class="mjx-mrow"><span id="MJXc-Node-16" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em;">b</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">b</script></span>. Обим се сада израчунава
формулом <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-5-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-17" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-18" class="mjx-mrow"><span id="MJXc-Node-19" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em;">O</span></span><span id="MJXc-Node-20" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span id="MJXc-Node-21" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">2</span></span><span id="MJXc-Node-22" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.344em;">⋅</span></span><span id="MJXc-Node-23" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.457em; padding-bottom: 0.571em;">(</span></span><span id="MJXc-Node-24" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">a</span></span><span id="MJXc-Node-25" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.287em; padding-bottom: 0.401em;">+</span></span><span id="MJXc-Node-26" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em;">b</span></span><span id="MJXc-Node-27" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.457em; padding-bottom: 0.571em;">)</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo>=</mo><mn>2</mn><mo>⋅</mo><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-5">O = 2\cdot (a + b)</script></span>. Ова функција је слична
претходној, једино што прима два аргумента. Ако претпоставимо да су
они целобројни, долазимо до следеће дефиниције.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">obim_pravougaonika</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span>
<span class="nf">obim_pravougaonika</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>Размотримо мало детаљније опис типа <code class="docutils literal notranslate"><span class="pre">Int</span> <span class="pre">-&gt;</span> <span class="pre">Int</span> <span class="pre">-&gt;</span> <span class="pre">Int</span></code>. Иако се он
може тумачити као да је у питању функција која прима два аргумента
типа <code class="docutils literal notranslate"><span class="pre">Int</span></code> и враћа резултат типа <code class="docutils literal notranslate"><span class="pre">Int</span></code>, овај опис треба читати као
<code class="docutils literal notranslate"><span class="pre">Int</span> <span class="pre">-&gt;</span> <span class="pre">(Int</span> <span class="pre">-&gt;</span> <span class="pre">Int)</span></code>, тј. тумачити је као функцију која прима
аргумент типа <code class="docutils literal notranslate"><span class="pre">Int</span></code>, а враћа функцију типа <code class="docutils literal notranslate"><span class="pre">Int</span> <span class="pre">-&gt;</span> <span class="pre">Int</span></code>. Све
функције су функције једне променљиве, а функције више променљивих се
добијају техником <strong>Каријевања</strong> (енг. <em>currying</em>). Дакле важи:</p>
<ul class="simple">
<li><p>Вредност израза <code class="docutils literal notranslate"><span class="pre">obim_pravougaonika</span> <span class="pre">3</span> <span class="pre">5</span></code> је целобројног типа
<code class="docutils literal notranslate"><span class="pre">Int</span></code> и износи 16.</p></li>
<li><p>Вредност израза <code class="docutils literal notranslate"><span class="pre">obim_pravougaonika</span> <span class="pre">3</span></code> је функција типа <code class="docutils literal notranslate"><span class="pre">Int</span> <span class="pre">-&gt;</span> <span class="pre">Int</span></code>
која прима један целобројни аргумент и враћа обим
правоугаоника коме је једна страница 3, а друга задата тим
аргументом.</p></li>
<li><p>Вредност израза <code class="docutils literal notranslate"><span class="pre">obim_pravougaonika</span></code> је функција која прима један
аргумент типа <code class="docutils literal notranslate"><span class="pre">Int</span></code> и враћа функцију која прима <code class="docutils literal notranslate"><span class="pre">Int</span></code> и враћа
<code class="docutils literal notranslate"><span class="pre">Int</span></code>.</p></li>
</ul>
<p>Наравно, уместо типа <code class="docutils literal notranslate"><span class="pre">Int</span></code> функција се може уопштити на произвољни
нумерички тип.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">obim_pravougaonika</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span>
<span class="nf">obim_pravougaonika</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>Са десне стране дефиниције функције налазе се произвољни изрази, па је
могуће да буду и изрази који користе <code class="docutils literal notranslate"><span class="pre">let-in</span></code>.</p>
<p>На пример, дефинишимо функцију која израчунава обим ограде око
фудбалског терена познате дужине и ширине, ако се зна да је ограда
постављена на истом растојању од сваке стране терена.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">obim_ograde</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Float</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Float</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Float</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Float</span>
<span class="nf">obim_ograde</span><span class="w"> </span><span class="n">sirina</span><span class="w"> </span><span class="n">duzina</span><span class="w"> </span><span class="n">rastojanje</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="kr">let</span><span class="w"> </span><span class="n">sirina_ograde</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">sirina</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">rastojanje</span>
<span class="w">        </span><span class="n">duzina_ograde</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">duzina</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">rastojanje</span>
<span class="w">     </span><span class="kr">in</span><span class="w"> </span><span class="n">obim_pravougaonika</span><span class="w"> </span><span class="n">sirina_ograde</span><span class="w"> </span><span class="n">duzina_ograde</span>
</pre></div>
</div>
<p>Приликом дефинисања функције постоји још један начин да се уведу
помоћне променљиве.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">obim_ograde</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Float</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Float</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Float</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Float</span>
<span class="nf">obim_ograde</span><span class="w"> </span><span class="n">sirina</span><span class="w"> </span><span class="n">duzina</span><span class="w"> </span><span class="n">rastojanje</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="n">obim_pravougaonika</span><span class="w"> </span><span class="n">sirina_ograde</span><span class="w"> </span><span class="n">duzina_ograde</span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="n">sirina_ograde</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">sirina</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">rastojanje</span>
<span class="w">          </span><span class="n">duzina_ograde</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">duzina</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">rastojanje</span>
</pre></div>
</div>
<p>У секцији <code class="docutils literal notranslate"><span class="pre">where</span></code> је могуће дефинисати и помоћне (локалне)
функције. Претходни пример подразумева да је функција
<code class="docutils literal notranslate"><span class="pre">obim_pravougaonika</span></code> већ дефинисана, а да није, она би могла да се
дефинише у склопу дефиниције функције <code class="docutils literal notranslate"><span class="pre">obim_ograde</span></code> (наравно, тада
не би могла да се користи у другим функцијама).</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">obim_ograde</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Real</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Real</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Real</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Real</span>
<span class="nf">obim_ograde</span><span class="w"> </span><span class="n">sirina</span><span class="w"> </span><span class="n">duzina</span><span class="w"> </span><span class="n">rastojanje</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="n">obim_pravougaonika</span><span class="w"> </span><span class="n">sirina_ograde</span><span class="w"> </span><span class="n">duzina_ograde</span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="n">sirina_ograde</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">sirina</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">rastojanje</span>
<span class="w">          </span><span class="n">duzina_ograde</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">duzina</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">rastojanje</span>
<span class="w">          </span><span class="n">obim_pravougaonika</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span>
<span class="w">          </span><span class="n">obim_pravougaonika</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>Уместо једне једнакости, функције могу бити дефинисане и коришћењем
већег броја једнакости. Тада се користи тзв. <strong>уклапање шаблона</strong>
(енг. <em>pattern matching</em>). Приликом израчунавања вредности функције
једнакости се проверавају редом и резултат се одређује коришћењем прве
једнакости која се уклапа са задатом вредношћу аргумента. На пример,
наредна функција одређује назив на основу редног броја дана. Доња црта
у последњој једнакости се поклапа са било којим аргументом, тако да ће
се у случају било које вредности која није између 1 и 7 добити грешка.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">naziv_dana</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">String</span>
<span class="nf">naziv_dana</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="s">"Ponedeljak"</span>
<span class="nf">naziv_dana</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="s">"Utorak"</span>
<span class="nf">naziv_dana</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="s">"Sreda"</span>
<span class="nf">naziv_dana</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="s">"Cetvrtak"</span>
<span class="nf">naziv_dana</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="s">"Petak"</span>
<span class="nf">naziv_dana</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="s">"Subota"</span>
<span class="nf">naziv_dana</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="s">"Nedelja"</span>
<span class="nf">naziv_dana</span><span class="w"> </span><span class="kr">_</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="s">"Greska"</span>
</pre></div>
</div>
<p>Још једна интересантна синтаксичка конструкција која избегава
коришћење <code class="docutils literal notranslate"><span class="pre">if-then</span></code> израза и чини код мало читљивијим су услови који
се додају испред једнакости у дефиницијама (тзв. <strong>чувари</strong>,
енг. <em>guards</em>). Наредна функција израчунава оцену на основу броја
поена (претпоставља се да ће број поена бити између 0 и 100).</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">ocena</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span>
<span class="nf">ocena</span><span class="w"> </span><span class="n">poeni</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">poeni</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">40</span><span class="w">    </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">poeni</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">55</span><span class="w">    </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">poeni</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">70</span><span class="w">    </span><span class="ow">=</span><span class="w"> </span><span class="mi">3</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">poeni</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">85</span><span class="w">    </span><span class="ow">=</span><span class="w"> </span><span class="mi">4</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">otherwise</span><span class="w">     </span><span class="ow">=</span><span class="w"> </span><span class="mi">5</span>
</pre></div>
</div>
<p>Услови се проверавају редом (као у конструкцији <code class="docutils literal notranslate"><span class="pre">else</span> <span class="pre">if</span></code> у
императивним програмским језицима). Последњи услов је увек испуњен
(подразумевајући да претходни нису) и одговара грани <code class="docutils literal notranslate"><span class="pre">else</span></code>.</p>
</section>
<section id="id3">
<h1>Рекурзивне функције</h1>
<p>Пошто је Haskell чист функционални језик, није могућа измена вредности
променљивих и самим тим није могуће коришћење петљи. Уместо тога,
контрола тока се може постићи коришћењем рекурзивних функција
(функција које позивају саме себе). Видећемо касније да се контрола
тока може остварити и на друге начине (пре свега коришћењем функција
вишег реда), тако да директно коришћење рекурзије треба избегавати
када год је то могуће (а није увек).</p>
<p>Дефинишимо рекурзивну функцију која израчунава факторијел.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">faktorijel</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">faktorijel</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span>
<span class="nf">faktorijel</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">faktorijel</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Ова дефиниција у потпуности одговара математичкој рекурзивној
дефиницији факторијела:</p>
<div class="math notranslate nohighlight">
<span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-6-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;!&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mtable columnalign=&quot;left left&quot; rowspacing=&quot;.2em&quot; columnspacing=&quot;1em&quot; displaystyle=&quot;false&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mtext&gt;&amp;#x437;&amp;#x430;&amp;#xA0;&lt;/mtext&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;!&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mtext&gt;&amp;#x437;&amp;#x430;&amp;#xA0;&lt;/mtext&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&quot;true&quot; stretchy=&quot;true&quot; symmetric=&quot;true&quot;&gt;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-28" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-29" class="mjx-mrow"><span id="MJXc-Node-30" class="mjx-mtable" style="vertical-align: -0.974em; padding: 0px 0.167em;"><span class="mjx-table"><span id="MJXc-Node-31" class="mjx-mtr" style="height: 2.449em;"><span id="MJXc-Node-32" class="mjx-mtd" style="padding: 0px; text-align: right; width: 12.588em;"><span id="MJXc-Node-33" class="mjx-mrow"><span id="MJXc-Node-34" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-35" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.457em; padding-bottom: 0.344em;">!</span></span><span id="MJXc-Node-36" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span id="MJXc-Node-37" class="mjx-mrow MJXc-space3"><span id="MJXc-Node-38" class="mjx-mo"><span class="mjx-char MJXc-TeX-size3-R" style="padding-top: 1.253em; padding-bottom: 1.253em;">{</span></span><span id="MJXc-Node-39" class="mjx-mtable" style="vertical-align: -0.925em; padding: 0px 0.167em;"><span class="mjx-table"><span id="MJXc-Node-40" class="mjx-mtr" style="height: 1.15em;"><span id="MJXc-Node-41" class="mjx-mtd" style="padding: 0px 0.5em 0px 0px; text-align: left; width: 4.701em;"><span id="MJXc-Node-42" class="mjx-mrow" style="margin-top: -0.175em;"><span id="MJXc-Node-43" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">1</span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-44" class="mjx-mtd" style="padding: 0px 0px 0px 0.5em; text-align: left; width: 3.593em;"><span id="MJXc-Node-45" class="mjx-mrow" style="margin-top: -0.175em;"><span id="MJXc-Node-46" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.514em; padding-bottom: 0.23em;"><span class="mjx-charbox MJXc-TeX-unknown-R" style="padding-bottom: 0.261em; width: 0.443em;">з</span><span class="mjx-charbox MJXc-TeX-unknown-R" style="padding-bottom: 0.261em; width: 0.466em;">а</span><span class="mjx-charbox MJXc-TeX-main-R" style="padding-bottom: 0.314em;">&nbsp;</span></span></span><span id="MJXc-Node-47" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-48" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span id="MJXc-Node-49" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">0</span></span><span class="mjx-strut"></span></span></span></span><span id="MJXc-Node-50" class="mjx-mtr" style="height: 1.2em;"><span id="MJXc-Node-51" class="mjx-mtd" style="padding: 0.1em 0.5em 0px 0px; text-align: left;"><span id="MJXc-Node-52" class="mjx-mrow" style="margin-top: -0.175em;"><span id="MJXc-Node-53" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-54" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.344em;">⋅</span></span><span id="MJXc-Node-55" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.457em; padding-bottom: 0.571em;">(</span></span><span id="MJXc-Node-56" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-57" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.287em; padding-bottom: 0.401em;">−</span></span><span id="MJXc-Node-58" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">1</span></span><span id="MJXc-Node-59" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.457em; padding-bottom: 0.571em;">)</span></span><span id="MJXc-Node-60" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.457em; padding-bottom: 0.344em;">!</span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-61" class="mjx-mtd" style="padding: 0.1em 0px 0px 0.5em; text-align: left;"><span id="MJXc-Node-62" class="mjx-mrow" style="margin-top: -0.175em;"><span id="MJXc-Node-63" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.514em; padding-bottom: 0.23em;"><span class="mjx-charbox MJXc-TeX-unknown-R" style="padding-bottom: 0.261em; width: 0.443em;">з</span><span class="mjx-charbox MJXc-TeX-unknown-R" style="padding-bottom: 0.261em; width: 0.466em;">а</span><span class="mjx-charbox MJXc-TeX-main-R" style="padding-bottom: 0.314em;">&nbsp;</span></span></span><span id="MJXc-Node-64" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-65" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.23em; padding-bottom: 0.401em;">&gt;</span></span><span id="MJXc-Node-66" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">0</span></span><span class="mjx-strut"></span></span></span></span></span></span><span id="MJXc-Node-67" class="mjx-mo" style="width: 0.12em;"></span></span><span class="mjx-strut"></span></span></span></span></span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left" rowspacing="3pt" columnspacing="0em" displaystyle="true"><mtr><mtd><mi>n</mi><mo>!</mo><mo>=</mo><mrow><mo>{</mo><mtable columnalign="left left" rowspacing=".2em" columnspacing="1em" displaystyle="false"><mtr><mtd><mn>1</mn></mtd><mtd><mtext>за&nbsp;</mtext><mi>n</mi><mo>=</mo><mn>0</mn></mtd></mtr><mtr><mtd><mi>n</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>!</mo></mtd><mtd><mtext>за&nbsp;</mtext><mi>n</mi><mo>&gt;</mo><mn>0</mn></mtd></mtr></mtable><mo fence="true" stretchy="true" symmetric="true"></mo></mrow></mtd></mtr></mtable></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-6">\begin{split}n! = \begin{cases}
     1 & \text{за } n = 0 \\
     n \cdot (n-1)! & \text{за } n > 0
     \end{cases}\end{split}</script></div>
<p>Израчунавање оваквих функција своди се на низ једнакости. На пример,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">faktorijel</span> <span class="mi">5</span> <span class="o">=</span>
<span class="mi">5</span> <span class="o">*</span> <span class="n">faktorijel</span> <span class="mi">4</span> <span class="o">=</span>
<span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">faktorijel</span> <span class="mi">3</span><span class="p">)</span> <span class="o">=</span>
<span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">faktorijel</span> <span class="mi">2</span><span class="p">))</span> <span class="o">=</span>
<span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">faktorijel</span> <span class="mi">1</span><span class="p">)))</span> <span class="o">=</span>
<span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="n">faktorijel</span> <span class="mi">0</span><span class="p">))))</span> <span class="o">=</span>
<span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="mi">1</span><span class="p">))))</span> <span class="o">=</span>
<span class="mi">120</span>
</pre></div>
</div>
<p>Приметимо да се у имплементацији користи уклапање шаблона. Наравно,
гранање се може остварити и на друге начине. На пример, могуће је
употребити израз <code class="docutils literal notranslate"><span class="pre">if-then</span></code>.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">faktorijel</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">faktorijel</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">faktorijel</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>А могуће је употребити и чуваре:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">faktorijel</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">faktorijel</span><span class="w"> </span><span class="n">n</span>
<span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w">     </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">otherwise</span><span class="w">  </span><span class="ow">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">faktorijel</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Алтернатива би била да факторијел дефинишемо на следећи начин:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">faktorijel</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">faktorijel</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="n">n</span><span class="p">]</span>
</pre></div>
</div>
<p>Ова дефиниција користи листе (њима ћемо се веома детаљно бавити
ускоро) и каже да је факторијел броја <code class="docutils literal notranslate"><span class="pre">n</span></code> производ елемената листе
која садржи бројеве од 1 до n (функција <code class="docutils literal notranslate"><span class="pre">product</span></code> рачуна производ).
Можемо слободно да констатујемо да је ова дефиниција још
декларативнија од оне засноване на рекурзији.</p>
<p>Веома слично можемо математичку дефиницију степеновања броја <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-7-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-68" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-69" class="mjx-mrow"><span id="MJXc-Node-70" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">x</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-7">x</script></span>
на изложилац <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-8-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-71" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-72" class="mjx-mrow"><span id="MJXc-Node-73" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">n</script></span> који је природан број:</p>
<div class="math notranslate nohighlight">
<span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-9-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msup&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mtable columnalign=&quot;left left&quot; rowspacing=&quot;.2em&quot; columnspacing=&quot;1em&quot; displaystyle=&quot;false&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mtext&gt;&amp;#x437;&amp;#x430;&amp;#xA0;&lt;/mtext&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mtext&gt;&amp;#x437;&amp;#x430;&amp;#xA0;&lt;/mtext&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&quot;true&quot; stretchy=&quot;true&quot; symmetric=&quot;true&quot;&gt;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-74" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-75" class="mjx-mrow"><span id="MJXc-Node-76" class="mjx-mtable" style="vertical-align: -0.974em; padding: 0px 0.167em;"><span class="mjx-table"><span id="MJXc-Node-77" class="mjx-mtr" style="height: 2.449em;"><span id="MJXc-Node-78" class="mjx-mtd" style="padding: 0px; text-align: right; width: 11.271em;"><span id="MJXc-Node-79" class="mjx-mrow"><span id="MJXc-Node-80" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-81" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">x</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.584em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-82" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span></span></span><span id="MJXc-Node-83" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span id="MJXc-Node-84" class="mjx-mrow MJXc-space3"><span id="MJXc-Node-85" class="mjx-mo"><span class="mjx-char MJXc-TeX-size3-R" style="padding-top: 1.253em; padding-bottom: 1.253em;">{</span></span><span id="MJXc-Node-86" class="mjx-mtable" style="vertical-align: -0.913em; padding: 0px 0.167em;"><span class="mjx-table"><span id="MJXc-Node-87" class="mjx-mtr" style="height: 1.15em;"><span id="MJXc-Node-88" class="mjx-mtd" style="padding: 0px 0.5em 0px 0px; text-align: left; width: 3.23em;"><span id="MJXc-Node-89" class="mjx-mrow" style="margin-top: -0.175em;"><span id="MJXc-Node-90" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">1</span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-91" class="mjx-mtd" style="padding: 0px 0px 0px 0.5em; text-align: left; width: 3.593em;"><span id="MJXc-Node-92" class="mjx-mrow" style="margin-top: -0.175em;"><span id="MJXc-Node-93" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.514em; padding-bottom: 0.23em;"><span class="mjx-charbox MJXc-TeX-unknown-R" style="padding-bottom: 0.261em; width: 0.443em;">з</span><span class="mjx-charbox MJXc-TeX-unknown-R" style="padding-bottom: 0.261em; width: 0.466em;">а</span><span class="mjx-charbox MJXc-TeX-main-R" style="padding-bottom: 0.314em;">&nbsp;</span></span></span><span id="MJXc-Node-94" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-95" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span id="MJXc-Node-96" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">0</span></span><span class="mjx-strut"></span></span></span></span><span id="MJXc-Node-97" class="mjx-mtr" style="height: 1.177em;"><span id="MJXc-Node-98" class="mjx-mtd" style="padding: 0.1em 0.5em 0px 0px; text-align: left;"><span id="MJXc-Node-99" class="mjx-mrow" style="margin-top: -0.148em;"><span id="MJXc-Node-100" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">x</span></span><span id="MJXc-Node-101" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.003em; padding-bottom: 0.344em;">⋅</span></span><span id="MJXc-Node-102" class="mjx-msubsup MJXc-space2"><span class="mjx-base"><span id="MJXc-Node-103" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">x</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-104" class="mjx-texatom" style=""><span id="MJXc-Node-105" class="mjx-mrow"><span id="MJXc-Node-106" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-107" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.287em; padding-bottom: 0.401em;">−</span></span><span id="MJXc-Node-108" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">1</span></span></span></span></span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-109" class="mjx-mtd" style="padding: 0.1em 0px 0px 0.5em; text-align: left;"><span id="MJXc-Node-110" class="mjx-mrow" style="margin-top: -0.148em;"><span id="MJXc-Node-111" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.514em; padding-bottom: 0.23em;"><span class="mjx-charbox MJXc-TeX-unknown-R" style="padding-bottom: 0.261em; width: 0.443em;">з</span><span class="mjx-charbox MJXc-TeX-unknown-R" style="padding-bottom: 0.261em; width: 0.466em;">а</span><span class="mjx-charbox MJXc-TeX-main-R" style="padding-bottom: 0.314em;">&nbsp;</span></span></span><span id="MJXc-Node-112" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-113" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.23em; padding-bottom: 0.401em;">&gt;</span></span><span id="MJXc-Node-114" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">0</span></span><span class="mjx-strut"></span></span></span></span></span></span><span id="MJXc-Node-115" class="mjx-mo" style="width: 0.12em;"></span></span><span class="mjx-strut"></span></span></span></span></span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left" rowspacing="3pt" columnspacing="0em" displaystyle="true"><mtr><mtd><msup><mi>x</mi><mi>n</mi></msup><mo>=</mo><mrow><mo>{</mo><mtable columnalign="left left" rowspacing=".2em" columnspacing="1em" displaystyle="false"><mtr><mtd><mn>1</mn></mtd><mtd><mtext>за&nbsp;</mtext><mi>n</mi><mo>=</mo><mn>0</mn></mtd></mtr><mtr><mtd><mi>x</mi><mo>⋅</mo><msup><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mtd><mtd><mtext>за&nbsp;</mtext><mi>n</mi><mo>&gt;</mo><mn>0</mn></mtd></mtr></mtable><mo fence="true" stretchy="true" symmetric="true"></mo></mrow></mtd></mtr></mtable></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-9">\begin{split}x^n  = \begin{cases}
     1 & \text{за } n = 0 \\
     x \cdot x^{n-1} & \text{за } n > 0
     \end{cases}\end{split}</script></div>
<p>претворити у рекурзивну дефиницију у програмском језику Haskell:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">stepen</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span>
<span class="nf">stepen</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span>
<span class="nf">stepen</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">stepen</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Приметимо да смо тип функције оставили отвореним (иста дефиниција важи
за основу <code class="docutils literal notranslate"><span class="pre">x</span></code> произвољног нумеричког типа <code class="docutils literal notranslate"><span class="pre">a</span></code>).</p>
<p>Наравно, степеновање се може извршити и ефикасније, ако се примети да
за парне вредности <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-10-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-116" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-117" class="mjx-mrow"><span id="MJXc-Node-118" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-10">n</script></span> важи <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-11-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mfrac&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-119" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-120" class="mjx-mrow"><span id="MJXc-Node-121" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-122" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">x</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-123" class="mjx-texatom" style=""><span id="MJXc-Node-124" class="mjx-mrow"><span id="MJXc-Node-125" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span></span></span></span></span><span id="MJXc-Node-126" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span id="MJXc-Node-127" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.457em; padding-bottom: 0.571em;">(</span></span><span id="MJXc-Node-128" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-129" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">x</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-130" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">2</span></span></span></span><span id="MJXc-Node-131" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-132" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.457em; padding-bottom: 0.571em;">)</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.604em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-133" class="mjx-mfrac" style=""><span class="mjx-box MJXc-stacked" style="width: 0.566em; padding: 0px 0.12em;"><span class="mjx-numerator" style="font-size: 70.7%; width: 0.8em; top: -1.127em;"><span id="MJXc-Node-134" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span></span><span class="mjx-denominator" style="font-size: 70.7%; width: 0.8em; bottom: -0.633em;"><span id="MJXc-Node-135" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">2</span></span></span><span class="mjx-line" style="border-bottom: 1.1px solid; top: -0.292em; width: 0.566em;"></span></span><span class="mjx-vsize" style="height: 1.245em; vertical-align: -0.448em;"></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></msup><mo>=</mo><mo stretchy="false">(</mo><msup><mi>x</mi><mn>2</mn></msup><msup><mo stretchy="false">)</mo><mfrac><mi>n</mi><mn>2</mn></mfrac></msup></math></span></span><script type="math/tex" id="MathJax-Element-11">x^{n} = (x^2)^\frac{n}{2}</script></span>.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">stepen</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span>
<span class="nf">stepen</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span>
<span class="nf">stepen</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">`</span><span class="n">mod</span><span class="p">`</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w">   </span><span class="ow">=</span><span class="w"> </span><span class="n">stepen</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="p">`</span><span class="n">div</span><span class="p">`</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">otherwise</span><span class="w">        </span><span class="ow">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">stepen</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Прикажимо израчунавање ове функције.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stepen</span> <span class="mi">2</span> <span class="mi">10</span> <span class="o">=</span>
<span class="n">stepen</span> <span class="mi">4</span> <span class="mi">5</span> <span class="o">=</span>
<span class="mi">4</span> <span class="o">*</span> <span class="n">stepen</span> <span class="mi">4</span> <span class="mi">4</span> <span class="o">=</span>
<span class="mi">4</span> <span class="o">*</span> <span class="n">stepen</span> <span class="mi">16</span> <span class="mi">2</span> <span class="o">=</span>
<span class="mi">4</span> <span class="o">*</span> <span class="n">stepen</span> <span class="mi">256</span> <span class="mi">1</span> <span class="o">=</span>
<span class="mi">4</span> <span class="o">*</span> <span class="mi">256</span> <span class="o">=</span>
<span class="mi">1024</span>
</pre></div>
</div>
<p>Још један пример једноставне рекурзивне функције може бити Еуклидов
алгоритам за одређивање највећег заједничког делиоца два броја.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">nzd</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">nzd</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span>
<span class="nf">nzd</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">nzd</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="p">`</span><span class="n">mod</span><span class="p">`</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>Прикажимо израчунавање ове функције на једном примеру:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nzd</span> <span class="mi">48</span> <span class="mi">18</span> <span class="o">=</span>
<span class="n">nzd</span> <span class="mi">18</span> <span class="mi">12</span> <span class="o">=</span>
<span class="n">nzd</span> <span class="mi">12</span> <span class="mi">6</span> <span class="o">=</span>
<span class="n">nzd</span> <span class="mi">6</span> <span class="mi">0</span> <span class="o">=</span>
<span class="mi">6</span>
</pre></div>
</div>
<section id="id4">
<h2>Репна рекурзија</h2>
<p>Приметимо да се приликом израчунавања вредности факторијела све
вредности првог чиноица морају сложити на стек и да се тек при изласку
из рекурзије рачуна производ. У случају дубоке рекурзије овакво
понашање може довести до прекорачења стека. За разлику од тога сваки
наредни позив функције <code class="docutils literal notranslate"><span class="pre">nzd</span></code> само замени вредност њених аргумената и
нема потребе памтити никакве податке на стеку. То је зато што је
функција <code class="docutils literal notranslate"><span class="pre">nzd</span></code> репно-рекурзивна (енг. <em>tail-recursive</em>), што значи
да се резултат функције добија рекурзивним позивом за промење
аргументе, тј. да резултат рекурзивног позива не треба додатно
обађивати да би се добио коначан резултат. За разлику од тога функција
<code class="docutils literal notranslate"><span class="pre">faktorijel</span></code> није репно-рекурзивна, јер се резултат рекурзивног
позива <code class="docutils literal notranslate"><span class="pre">faktorijel</span> <span class="pre">(n</span> <span class="pre">-</span> <span class="pre">1)</span></code> додатно мора помножити са <code class="docutils literal notranslate"><span class="pre">n</span></code>. У
оптимизованој верзији функције <code class="docutils literal notranslate"><span class="pre">stepen</span></code> један рекурзивни позив је
репни, а други није.  Репну рекурзију је пожељно користити када год је
то могуће, да би се избегла могућност прекорачења стека (нарочито код
функција код којих дубина рекурзије може бити велика, тј. линеарно
зависи од вредности аргумената).</p>
<p>И факторијел је могуће дефинисати репно-рекурзивно.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">faktorijel</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">faktorijel</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">faktorijel'</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="mi">1</span>
<span class="w">   </span><span class="kr">where</span><span class="w"> </span><span class="n">faktorijel'</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="w">         </span><span class="n">faktorijel'</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">acc</span>
<span class="w">         </span><span class="n">faktorijel'</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">faktorijel'</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">acc</span><span class="p">)</span>
</pre></div>
</div>
<p>Размотримо извршавање ове функције:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">faktorijel</span> <span class="mi">5</span> <span class="o">=</span>
<span class="n">faktorijel</span><span class="s1">' 5 1 =</span>
<span class="n">faktorijel</span><span class="s1">' 4 5 =</span>
<span class="n">faktorijel</span><span class="s1">' 3 20 =</span>
<span class="n">faktorijel</span><span class="s1">' 2 60 =</span>
<span class="n">faktorijel</span><span class="s1">' 1 120 =</span>
<span class="n">faktorijel</span><span class="s1">' 0 120 =</span>
<span class="mi">120</span>
</pre></div>
</div>
<p>Функција <code class="docutils literal notranslate"><span class="pre">faktorijel</span></code> посао препушта функцији <code class="docutils literal notranslate"><span class="pre">faktorijel'</span></code>,
уводећи нову променљиву у којој ће се акумулирати резултат (такве
променљиве ћемо називати <strong>акумулатор</strong>,
енг. <em>accumulator</em>). Приметимо да ова имплементација сасвим одговара
следећој императивној имплементацији:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">faktorijel</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<span class="w">       </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">acc</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
        <div class="course-content info">
            
<p>Све је ово лепо у теорији, али у пракси постоји проблем, због лењог
израчунавања које је уграђено у језик Haskell. Наиме, вредност
првог аргумента се увек експлицитно израчунава, јер је потребно да
се она зна да би се знало да ли се примењује прво или друго
правило. Међутим, вредност другог аргумента није потребна до самог
краја израчунавања, тако да се то израчунавање одлаже до самог
краја.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">faktorijel</span> <span class="mi">5</span> <span class="o">=</span>
<span class="n">faktorijel</span><span class="s1">' 5 1 =</span>
<span class="n">faktorijel</span><span class="s1">' 4 (5*1) =</span>
<span class="n">faktorijel</span><span class="s1">' 3 4*(5*1) =</span>
<span class="n">faktorijel</span><span class="s1">' 2 3*(4*(5*1)) =</span>
<span class="n">faktorijel</span><span class="s1">' 1 2*(3*(4*(5*1))) =</span>
<span class="n">faktorijel</span><span class="s1">' 0 1*(2*(3*(4*(5*1)))) =</span>
<span class="mi">120</span>
</pre></div>
</div>
<p>Да би се спречила изградња овог великог израза, потребно је некако
натерати Haskell да други аргумент израчуна чим може, а не лењо,
тек када затреба. Да би се аргумент функције <code class="docutils literal notranslate"><span class="pre">f</span></code> израчунао пре
позива функције <code class="docutils literal notranslate"><span class="pre">f</span></code> можемо употребити оператор <code class="docutils literal notranslate"><span class="pre">$!</span></code>
(тзв. оператор стриктне примене функције). Измена у коду је мала,
али доноси жељену оптимизацију. Функција <code class="docutils literal notranslate"><span class="pre">faktorijel'</span> <span class="pre">(n-1)</span></code>
(подсетите се Каријевања) се примењује на аргумент <code class="docutils literal notranslate"><span class="pre">n*acc</span></code>, чије
се израчунавање захтева пре позива функције.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">faktorijel'</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="w">   </span><span class="n">faktorijel'</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">acc</span>
<span class="w">   </span><span class="n">faktorijel'</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">faktorijel'</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">$!</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">acc</span><span class="p">)</span>
</pre></div>
</div>
    </div>
<p>Репну рекурзију је по правилу боље користити него рекурзију која није
репна, јер функционални програмски језици (али не само они) ту
рекурзију уклањају и мењају је итерацијом (као што смо описали, не
креирају се нови стек оквири, већ се у меморији рачунара мењају
вредности променљивих, што одговара итеративном начину израчунавања).</p>
<p>Размотримо још један пример ове технике. Фибоначијев низ се дефинише
помоћу следеће рекурзивне дефиниције:</p>
<div class="math notranslate nohighlight">
<span class="MathJax_Preview" style="color: inherit;"></span><span class="mjx-chtml MJXc-display" style="text-align: center;"><span id="MathJax-Element-12-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mtable columnalign=&quot;right center left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0 thickmathspace&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mspace width=&quot;1em&quot; /&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2265;&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-136" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-137" class="mjx-mrow"><span id="MJXc-Node-138" class="mjx-mtable" style="vertical-align: -1.563em; padding: 0px 0.167em;"><span class="mjx-table"><span id="MJXc-Node-139" class="mjx-mtr" style="height: 3.626em;"><span id="MJXc-Node-140" class="mjx-mtd" style="padding: 0px; text-align: right; width: 11.883em;"><span id="MJXc-Node-141" class="mjx-mrow"><span id="MJXc-Node-142" class="mjx-mtable" style="vertical-align: -1.563em; padding: 0px 0.167em;"><span class="mjx-table"><span id="MJXc-Node-143" class="mjx-mtr" style="height: 1.15em;"><span id="MJXc-Node-144" class="mjx-mtd" style="padding: 0px; text-align: right; width: 1.103em;"><span id="MJXc-Node-145" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-146" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.106em;"><span id="MJXc-Node-147" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em; padding-right: 0.106em;">F</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-148" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">0</span></span></span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-149" class="mjx-mtd" style="padding: 0px 0.139em 0px 0px; width: 1.056em;"><span id="MJXc-Node-150" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-151" class="mjx-mi"></span><span id="MJXc-Node-152" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-153" class="mjx-mtd" style="padding: 0px 0px 0px 0.139em; text-align: left; width: 9.113em;"><span id="MJXc-Node-154" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-155" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">0</span></span><span class="mjx-strut"></span></span></span></span><span id="MJXc-Node-156" class="mjx-mtr" style="height: 1.3em;"><span id="MJXc-Node-157" class="mjx-mtd" style="padding: 0.15em 0px 0px; text-align: right;"><span id="MJXc-Node-158" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-159" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.106em;"><span id="MJXc-Node-160" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em; padding-right: 0.106em;">F</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-161" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">1</span></span></span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-162" class="mjx-mtd" style="padding: 0.15em 0.139em 0px 0px;"><span id="MJXc-Node-163" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-164" class="mjx-mi"></span><span id="MJXc-Node-165" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-166" class="mjx-mtd" style="padding: 0.15em 0px 0px 0.139em; text-align: left;"><span id="MJXc-Node-167" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-168" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">1</span></span><span class="mjx-strut"></span></span></span></span><span id="MJXc-Node-169" class="mjx-mtr" style="height: 1.176em;"><span id="MJXc-Node-170" class="mjx-mtd" style="padding: 0.15em 0px 0px; text-align: right;"><span id="MJXc-Node-171" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-172" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.106em;"><span id="MJXc-Node-173" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em; padding-right: 0.106em;">F</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-174" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span></span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-175" class="mjx-mtd" style="padding: 0.15em 0.139em 0px 0px;"><span id="MJXc-Node-176" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-177" class="mjx-mi"></span><span id="MJXc-Node-178" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.06em; padding-bottom: 0.344em;">=</span></span><span class="mjx-strut"></span></span></span><span id="MJXc-Node-179" class="mjx-mtd" style="padding: 0.15em 0px 0px 0.139em; text-align: left;"><span id="MJXc-Node-180" class="mjx-mrow" style="margin-top: -0.2em;"><span id="MJXc-Node-181" class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.106em;"><span id="MJXc-Node-182" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em; padding-right: 0.106em;">F</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-183" class="mjx-texatom" style=""><span id="MJXc-Node-184" class="mjx-mrow"><span id="MJXc-Node-185" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-186" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.287em; padding-bottom: 0.401em;">−</span></span><span id="MJXc-Node-187" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">1</span></span></span></span></span></span><span id="MJXc-Node-188" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.287em; padding-bottom: 0.401em;">+</span></span><span id="MJXc-Node-189" class="mjx-msubsup MJXc-space2"><span class="mjx-base" style="margin-right: -0.106em;"><span id="MJXc-Node-190" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.457em; padding-bottom: 0.287em; padding-right: 0.106em;">F</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-191" class="mjx-texatom" style=""><span id="MJXc-Node-192" class="mjx-mrow"><span id="MJXc-Node-193" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-194" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.287em; padding-bottom: 0.401em;">−</span></span><span id="MJXc-Node-195" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">2</span></span></span></span></span></span><span id="MJXc-Node-196" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.168em; padding-bottom: 0.514em;">,</span></span><span id="MJXc-Node-197" class="mjx-mspace" style="width: 1em; height: 0px;"></span><span id="MJXc-Node-198" class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.23em; padding-bottom: 0.287em;">n</span></span><span id="MJXc-Node-199" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.344em; padding-bottom: 0.457em;">≥</span></span><span id="MJXc-Node-200" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">2</span></span><span class="mjx-strut"></span></span></span></span></span></span><span class="mjx-strut"></span></span></span></span></span></span></span></span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left" rowspacing="3pt" columnspacing="0em" displaystyle="true"><mtr><mtd><mtable columnalign="right center left" rowspacing="3pt" columnspacing="0 thickmathspace" displaystyle="true"><mtr><mtd><msub><mi>F</mi><mn>0</mn></msub></mtd><mtd><mi></mi><mo>=</mo></mtd><mtd><mn>0</mn></mtd></mtr><mtr><mtd><msub><mi>F</mi><mn>1</mn></msub></mtd><mtd><mi></mi><mo>=</mo></mtd><mtd><mn>1</mn></mtd></mtr><mtr><mtd><msub><mi>F</mi><mi>n</mi></msub></mtd><mtd><mi></mi><mo>=</mo></mtd><mtd><msub><mi>F</mi><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>F</mi><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>,</mo><mspace width="1em"></mspace><mi>n</mi><mo>≥</mo><mn>2</mn></mtd></mtr></mtable></mtd></mtr></mtable></math></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-12">\begin{split}\begin{eqnarray*}
F_0 &=& 0\\
F_1 &=& 1\\
F_n &=& F_{n-1} + F_{n-2}, \quad n \geq 2
\end{eqnarray*}\end{split}</script></div>
<p>Ова дефиниција се може директно превести у Haskell.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">fib</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">fib</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span>
<span class="nf">fib</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span>
<span class="nf">fib</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">fib</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fib</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Међутим, овде долази до понављања рекурзивних позива (један те исти
рекурзивни позив се извршава више пута), што узрокује експонецијалну
сложеност и веома неефикасно рачунање. Проблем није у програмском
језику, већ у лоше имплементираном алгоритму.</p>
<p>Итеративно решење се може добити применом репне рекурзије,
тј. програмирања са акумулатором. Функцији се прослеђују два члана
Фибоначијевог низа (назовимо их <code class="docutils literal notranslate"><span class="pre">p</span></code> као претходни и <code class="docutils literal notranslate"><span class="pre">t</span></code> као
текући) и редни број <code class="docutils literal notranslate"><span class="pre">n</span></code> елемента који желимо да израчунамо.  Ако је
<code class="docutils literal notranslate"><span class="pre">n</span></code> једнако нула враћамо претходни елемент, ако је једнако један
враћамо текући, а у супротном, у рекурзивном позиву рачунамо нова два
елемента низа: текући постаје претходни, а збир претходног и текућег
даје нови текући елемент.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">fib</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">fib</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">fib'</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">n</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">     </span><span class="n">fib'</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">p</span>
<span class="w">     </span><span class="n">fib'</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">t</span>
<span class="w">     </span><span class="n">fib'</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">fib'</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Прикажимо извршавање ове функције на једном примеру.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fib</span> <span class="mi">6</span> <span class="o">=</span>
<span class="n">fib</span><span class="s1">' 0 1 6 =</span>
<span class="n">fib</span><span class="s1">' 1 1 5 =</span>
<span class="n">fib</span><span class="s1">' 1 2 4 =</span>
<span class="n">fib</span><span class="s1">' 2 3 3 =</span>
<span class="n">fib</span><span class="s1">' 3 5 2 =</span>
<span class="n">fib</span><span class="s1">' 5 8 1 =</span>
<span class="mi">8</span>
</pre></div>
</div>
<p>За разлику од полазне, ова имплементација је веома ефикасна и
суштински одговара наредној итеративној имплементацији.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="kt">uint</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="w">       </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="w">       </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="w">       </span><span class="n">n</span><span class="o">--</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</main>
</body>
</html>