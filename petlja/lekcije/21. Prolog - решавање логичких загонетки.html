<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Логичке загонетке - Програмске парадигме</title>
    <link rel="stylesheet" href="../stil.css">
    <link rel="stylesheet" href="../stil.css">
</head>
<body>
<div id="lectureContent-8416" class="lectureContentMaterial active">



    
  <nav style="margin-bottom: 1em;"><a href="../programske_paradigme.html">← Назад на листу лекција</a></nav><section id="id1">
<h1>Логичке загонетке</h1>
<p>Веома лепа илустрација моћи језика Prolog у односу на друге програмске
језике је кроз решавање логичких загонетки. Обично су програми само
прецизно кодирање услова загонетки, а систем онда самостално проналази
решење, што је доста ефикасније него код других програмских језика у
којима програмер мора да програмира поступак одређивања решења. У
зависности од загонетке која се решава и начина решавања, програми
могу бити мање или више ефикасни. У наредним решењима нећемо обраћати
много пажње на ефикасност решења, већ пре свега на једноставност
њиховог програмирања. Размотримо следећих неколико примера.</p>

    <div class="note-wrapper questionnote-type">
        <div class="note-icon-holder"> </div>
        <img src="/_runestone/_static/img/question-mark.png" class="note-image questionnote-image"> 
        <div class="course-content">
<p>Неколико пријатеља је гласало које би градове желели да посете.</p>
<ol class="arabic simple">
<li><p>Гласали су за Каиро, Лондон, Пекинг, Москву, Бомбај, Најроби и
Џакарту.</p></li>
<li><p>Један град је добио 4 гласа, два града по 2 гласа, два града по 1
глас и два града нису добили ниједан глас.</p></li>
<li><p>Каиро и Пекинг су добили различит број гласова.</p></li>
<li><p>Москва је добила или најмање или највише гласова од свих градова.</p></li>
<li><p>Каиро је добио више гласова од Џакарте.</p></li>
<li><p>Гледајући листу из тачке 1, тачно два пута се догодило да је град
са два гласа дошао непосредно иза града са једним гласом.</p></li>
<li><p>Џакарта је добила или један глас мање од Лондона или један
глас мање од Пекинга.</p></li>
</ol>

    </div></div>
<p>Направићемо листу променљивих које одговарају градовима. Вредност
сваке од тих променљивих биће број гласова које је тај град добио. На
основу другог правила знамо да ће листа вредности тих променљивих
садржати вредности <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">2,</span> <span class="pre">2,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0]</span></code>, али не знамо у ком
редоследу, тј. знаћемо да је листа вредности променљивих једна од
пермутација ове листе. Можемо употребити библиотечки предикат
<code class="docutils literal notranslate"><span class="pre">permutation</span></code> који се може употребљавати за набрајање свих
пермутација (покушајте да за вежбу самостално дефинишете такав
предикат). Приступ решењу је, дакле, прилично директан: набрајају се
све пермутације ове листе и за сваку од њих се проверава да ли
задовољава додатне услове. Иако су оваква решења у општем случају
веома неефикасна, јер број пермутација брзо расте, у овом конкретном
задатку ефикасност је задовољавајућа јер пермутација седмочлане листе
има тек око 5000. Сваки даљи услов, осим услова 6, веома се директно
кодира. Што се тиче услова 6, дефинишемо помоћни предикат који броји
појављивања пара бројева у листи.</p>
<div class="highlight-prolog notranslate"><div class="highlight"><pre><span></span><span class="nf">brojPojavljivanjaPara</span><span class="p">([],</span> <span class="k">_</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span>
<span class="nf">brojPojavljivanjaPara</span><span class="p">([</span><span class="nv">X1</span><span class="p">,</span><span class="nv">X2</span><span class="p">|</span><span class="nv">T</span><span class="p">],</span> <span class="p">[</span><span class="nv">X1</span><span class="p">,</span><span class="nv">X2</span><span class="p">],</span> <span class="nv">N</span><span class="p">)</span> <span class="p">:-</span>
   <span class="nf">brojPojavljivanjaPara</span><span class="p">(</span><span class="nv">T</span><span class="p">,</span> <span class="p">[</span><span class="nv">X1</span><span class="p">,</span><span class="nv">X2</span><span class="p">],</span> <span class="nv">N1</span><span class="p">),</span> <span class="nv">N</span> <span class="o">is</span> <span class="nv">N1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="p">!.</span>
<span class="nf">brojPojavljivanjaPara</span><span class="p">([</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">],</span> <span class="p">[</span><span class="nv">X1</span><span class="p">,</span><span class="nv">X2</span><span class="p">],</span> <span class="nv">N</span><span class="p">)</span> <span class="p">:-</span>
   <span class="nf">brojPojavljivanjaPara</span><span class="p">(</span><span class="nv">T</span><span class="p">,</span> <span class="p">[</span><span class="nv">X1</span><span class="p">,</span><span class="nv">X2</span><span class="p">],</span> <span class="nv">N</span><span class="p">).</span>

<span class="nf">glasovi</span><span class="p">(</span><span class="nv">Gradovi</span><span class="p">)</span> <span class="p">:-</span>
  <span class="nv">Gradovi</span> <span class="o">=</span> <span class="p">[</span><span class="nv">Kairo</span><span class="p">,</span><span class="nv">London</span><span class="p">,</span><span class="nv">Peking</span><span class="p">,</span><span class="nv">Moskva</span><span class="p">,</span><span class="nv">Bombaj</span><span class="p">,</span><span class="nv">Najrobi</span><span class="p">,</span><span class="nv">Dzakarta</span><span class="p">],</span>
  <span class="nf">permutation</span><span class="p">(</span><span class="nv">Gradovi</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
  <span class="nv">Kairo</span> <span class="s s-Atom">=\=</span> <span class="nv">Peking</span><span class="p">,</span>
  <span class="p">(</span><span class="nv">Moskva</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">Moskva</span> <span class="o">=</span> <span class="mi">4</span><span class="p">),</span>
  <span class="nv">Kairo</span> <span class="o">&gt;</span> <span class="nv">Dzakarta</span><span class="p">,</span>
  <span class="nf">brojPojavljivanjaPara</span><span class="p">(</span><span class="nv">Gradovi</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
  <span class="p">(</span><span class="nv">Dzakarta</span> <span class="o">is</span> <span class="p">(</span><span class="nv">London</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="nv">Dzakarta</span> <span class="o">is</span> <span class="p">(</span><span class="nv">Peking</span><span class="o">-</span><span class="mi">1</span><span class="p">)).</span>
</pre></div>
</div>
<p>Тачно решење <code class="docutils literal notranslate"><span class="pre">Gradovi</span> <span class="pre">=</span> <span class="pre">[4,</span> <span class="pre">0,</span> <span class="pre">2,</span> <span class="pre">0,</span> <span class="pre">2,</span> <span class="pre">1,</span> <span class="pre">1]</span></code> се пријављује
неколико пута, јер функција за проналажење пермутација неколико
пута проналази исту пермутацију (зато што листа садржи дупликате).</p>

    <div class="note-wrapper questionnote-type">
        <div class="note-icon-holder"> </div>
        <img src="/_runestone/_static/img/question-mark.png" class="note-image questionnote-image"> 
        <div class="course-content">
<p>Пет људи различитих националности живи у пет кућа различитих боја,
имају пет различитих врста кућних љубимаца, пију пет различитих
напитака и пуше пет различитих врста цигарета.</p>
<ol class="arabic simple">
<li><p>Норвежанин живи у првој кући.</p></li>
<li><p>Млеко се пије у средњој кући.</p></li>
<li><p>Енглез живи у црвеној кући.</p></li>
<li><p>Шпанац има пса.</p></li>
<li><p>У зеленој кући се пије кафа.</p></li>
<li><p>Украјинац пије чај.</p></li>
<li><p>Власник пужа пуши цигарете „олд голд“.</p></li>
<li><p>У жутој кући се пуше цигарете „кулс“.</p></li>
<li><p>Зелена кућа је прва десно од куће боје слоноваче.</p></li>
<li><p>У кући поред оне у којој живи лисица се пуше цигарете „честер“.</p></li>
<li><p>У кући поред оне у којој се пуше цигарете „кулс“ је љубимац коњ.</p></li>
<li><p>Плава кућа је поред оне у којој живи Норвежанин.</p></li>
<li><p>Власник једне куће пуши цигарете „лаки“ и пије ђус.</p></li>
<li><p>Јапанац пуши цигарете „парламент“.</p></li>
</ol>

    </div></div>
<p>Напиши програм који одређује ко је власник зебре и ко пије воду?</p>
<p>Кључно питање је како представити решење. Веома погодна
репрезентација је у облику листе термова где је сваки терм облика
<code class="docutils literal notranslate"><span class="pre">kuca(nacionalnost,</span> <span class="pre">boja,</span> <span class="pre">ljubimac,</span> <span class="pre">pice,</span> <span class="pre">cigarete)</span></code>. Тада можемо
креирати петочлану листу <code class="docutils literal notranslate"><span class="pre">Kuce</span></code> и кодирати услове о њеним
члановима. Прва два услова се могу кодирати приликом дефинисања
низа кућа: први елемент је облика <code class="docutils literal notranslate"><span class="pre">kuca(norvezanin,</span> <span class="pre">_,</span> <span class="pre">_,</span> <span class="pre">_,</span> <span class="pre">_)</span></code>,
где анонимне променљиве могу бити унификоване са стварним
вредностима на тим позицијама, а трећи елемент је облика
<code class="docutils literal notranslate"><span class="pre">kuca(_,</span> <span class="pre">_,</span> <span class="pre">_,</span> <span class="pre">mleko,</span> <span class="pre">_)</span></code>. О другом, четвртом и петом елементу листе
не знамо ништа, па их можемо представити анонимним променљивама. У услову
9. потребно је да кодирамо „кућа је десно од куће“, а у неколико
услова треба да кодирамо да су куће једна поред друге. За то
дефинишемо два помоћна предиката <code class="docutils literal notranslate"><span class="pre">desnoOd</span></code> и <code class="docutils literal notranslate"><span class="pre">pored</span></code> (који се лако
кодира помоћу <code class="docutils literal notranslate"><span class="pre">desnoOd</span></code> зато што је кућа поред куће ако и само ако
је прва десно од друге или друга десно од прве). Све остале услове
кодирамо коришћењем уграђеног предиката <code class="docutils literal notranslate"><span class="pre">member</span></code>, који проверава да
ли дати елемент припада листи, али и може да наброји редом чланове
листе. Имајући све ово у виду, сви услови се прилично директно
кодирају (приметимо да услови различитости следе из тога што за сваку
категорију имамо пет различитих константи, након што као последња два
услова додамо информације о томе да власник зебре има зебру, а да онај
ко пије воду пије воду). Покретањем предиката <code class="docutils literal notranslate"><span class="pre">zebraZagonetka</span></code>
добијамо јединствено решење да Јапанац има зебру, а да Норвежанин пије
воду.</p>
<div class="highlight-prolog notranslate"><div class="highlight"><pre><span></span><span class="nf">desnoOd</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">,</span> <span class="p">[</span><span class="nv">Y</span><span class="p">,</span> <span class="nv">X</span><span class="p">|</span> <span class="k">_</span><span class="p">]).</span>
<span class="nf">desnoOd</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">,</span> <span class="p">[</span><span class="k">_</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="p">:-</span> <span class="nf">desnoOd</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">,</span> <span class="nv">T</span><span class="p">).</span>
<span class="nf">pored</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">,</span> <span class="nv">L</span><span class="p">)</span> <span class="p">:-</span> <span class="nf">desnoOd</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">,</span> <span class="nv">L</span><span class="p">)</span> <span class="p">;</span> <span class="nf">desnoOd</span><span class="p">(</span><span class="nv">Y</span><span class="p">,</span> <span class="nv">X</span><span class="p">,</span> <span class="nv">L</span><span class="p">).</span>

<span class="nf">zebraZagonetka</span><span class="p">(</span><span class="nv">VlasnikZebre</span><span class="p">,</span> <span class="nv">PijeVodu</span><span class="p">)</span> <span class="p">:-</span>
   <span class="nv">Kuce</span> <span class="o">=</span> <span class="p">[</span><span class="nf">kuca</span><span class="p">(</span><span class="s s-Atom">norvezanin</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="k">_</span><span class="p">,</span> <span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">mleko</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">],</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="s s-Atom">englez</span><span class="p">,</span> <span class="s s-Atom">crvena</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="s s-Atom">spanac</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">pas</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="s s-Atom">zelena</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">kafa</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="s s-Atom">ukrajinac</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">caj</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">puz</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">oldgold</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="s s-Atom">zuta</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">kuls</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">desnoOd</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="s s-Atom">zelena</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="s s-Atom">slonovaca</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">pored</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">cester</span><span class="p">),</span> <span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">lisica</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">pored</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">kuls</span><span class="p">),</span> <span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">konj</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">pored</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="s s-Atom">norvezanin</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="s s-Atom">plava</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">djus</span><span class="p">,</span> <span class="s s-Atom">laki</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="s s-Atom">japanac</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">parlament</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="nv">VlasnikZebre</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">zebra</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">),</span>
   <span class="nf">member</span><span class="p">(</span><span class="nf">kuca</span><span class="p">(</span><span class="nv">PijeVodu</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="s s-Atom">voda</span><span class="p">,</span> <span class="k">_</span><span class="p">),</span> <span class="nv">Kuce</span><span class="p">).</span>
</pre></div>
</div>
<section id="id2">
<h2>Судоку решавач</h2>
<p>У претходним поглављима смо видели неколико решења загонетке Судоку у
различитим програмским језицима и системима. У наставку следе два
правила у језику Prolog која могу да реше Судоку загонетку димензије
<span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-1-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-1" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-2" class="mjx-mrow"><span id="MJXc-Node-3" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">4</span></span><span id="MJXc-Node-4" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.23em; padding-bottom: 0.344em;">×</span></span><span id="MJXc-Node-5" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">4</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>4</mn><mo>×</mo><mn>4</mn></math></span></span><script type="math/tex" id="MathJax-Element-1">4\times 4</script></span>. Табла је представљена као листа листи и Кодирано је
да је свака врста, свака колона и сваки квадрат димензије <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-2-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-6" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-7" class="mjx-mrow"><span id="MJXc-Node-8" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">2</span></span><span id="MJXc-Node-9" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.23em; padding-bottom: 0.344em;">×</span></span><span id="MJXc-Node-10" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">2</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mo>×</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-2">2
\times 2</script></span> пермутација бројева од 1 до 4. На основу ових ограничења
Prolog може да наброји све исправне Судоку табле. За набрајање
пермутација коришћен је библиотечки предикат <code class="docutils literal notranslate"><span class="pre">permutation</span></code> (а раније
смо приказали како се ова функционалност може ручно
кодирати). Приметимо да је бектрекинг претрага уграђена у сам језик и
да, за разлику од имплементација у императивним и функционалним
језицима, она није видљива у програмском коду. Програм је сасвим
декларативан и процедура претраге решења је у потпуности сакривена од
програмера.</p>
<div class="highlight-prolog notranslate"><div class="highlight"><pre><span></span><span class="nf">permutacija</span><span class="p">(</span><span class="nv">Xs</span><span class="p">)</span> <span class="p">:-</span> <span class="nf">permutation</span><span class="p">(</span><span class="nv">Xs</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]).</span>

<span class="nf">sudoku</span><span class="p">(</span><span class="nv">Xs</span><span class="p">)</span> <span class="p">:-</span> <span class="nv">Xs</span> <span class="o">=</span> <span class="p">[[</span><span class="nv">A11</span><span class="p">,</span> <span class="nv">A12</span><span class="p">,</span> <span class="nv">A13</span><span class="p">,</span> <span class="nv">A14</span><span class="p">],</span>
                    <span class="p">[</span><span class="nv">A21</span><span class="p">,</span> <span class="nv">A22</span><span class="p">,</span> <span class="nv">A23</span><span class="p">,</span> <span class="nv">A24</span><span class="p">],</span>
                    <span class="p">[</span><span class="nv">A31</span><span class="p">,</span> <span class="nv">A32</span><span class="p">,</span> <span class="nv">A33</span><span class="p">,</span> <span class="nv">A34</span><span class="p">],</span>
                    <span class="p">[</span><span class="nv">A41</span><span class="p">,</span> <span class="nv">A42</span><span class="p">,</span> <span class="nv">A43</span><span class="p">,</span> <span class="nv">A44</span><span class="p">]],</span>

    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A11</span><span class="p">,</span> <span class="nv">A12</span><span class="p">,</span> <span class="nv">A13</span><span class="p">,</span> <span class="nv">A14</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A21</span><span class="p">,</span> <span class="nv">A22</span><span class="p">,</span> <span class="nv">A23</span><span class="p">,</span> <span class="nv">A24</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A31</span><span class="p">,</span> <span class="nv">A32</span><span class="p">,</span> <span class="nv">A33</span><span class="p">,</span> <span class="nv">A34</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A41</span><span class="p">,</span> <span class="nv">A42</span><span class="p">,</span> <span class="nv">A43</span><span class="p">,</span> <span class="nv">A44</span><span class="p">]),</span>

    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A11</span><span class="p">,</span> <span class="nv">A21</span><span class="p">,</span> <span class="nv">A31</span><span class="p">,</span> <span class="nv">A41</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A12</span><span class="p">,</span> <span class="nv">A22</span><span class="p">,</span> <span class="nv">A32</span><span class="p">,</span> <span class="nv">A42</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A13</span><span class="p">,</span> <span class="nv">A23</span><span class="p">,</span> <span class="nv">A33</span><span class="p">,</span> <span class="nv">A43</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A14</span><span class="p">,</span> <span class="nv">A24</span><span class="p">,</span> <span class="nv">A34</span><span class="p">,</span> <span class="nv">A44</span><span class="p">]),</span>

    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A11</span><span class="p">,</span> <span class="nv">A12</span><span class="p">,</span> <span class="nv">A21</span><span class="p">,</span> <span class="nv">A22</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A13</span><span class="p">,</span> <span class="nv">A14</span><span class="p">,</span> <span class="nv">A23</span><span class="p">,</span> <span class="nv">A24</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A31</span><span class="p">,</span> <span class="nv">A32</span><span class="p">,</span> <span class="nv">A41</span><span class="p">,</span> <span class="nv">A42</span><span class="p">]),</span>
    <span class="nf">permutacija</span><span class="p">([</span><span class="nv">A33</span><span class="p">,</span> <span class="nv">A34</span><span class="p">,</span> <span class="nv">A43</span><span class="p">,</span> <span class="nv">A44</span><span class="p">]).</span>
</pre></div>
</div>
<p>Уопштавање овог проблем на таблу веће димензије, нажалост, не даје
програм који је довољно ефикасан.</p>

    <div class="note-wrapper infonote-type">
        <div class="note-icon-holder"> </div>
        <img src="/_runestone/_static/img/infonote-img.svg" class="note-image infonote-image"> 
        <div class="course-content">
            
<p>Задатак се ефикасно решава ако се користи проширење језика Prolog
које подржава тзв. <strong>програмирање ограничења над коначним
доменима</strong> (енгл. constraint logic programming over finite
domains). SWI Prolog подржава ово проширење, ако се укључи
одговарајућа библиотека. Наредно решење је управо и приказано на
сајту SWI Prologa, као пример употребе ове библиотеке.</p>
<div class="highlight-prolog notranslate"><div class="highlight"><pre><span></span><span class="p">:-</span> <span class="nf">use_module</span><span class="p">(</span><span class="nf">library</span><span class="p">(</span><span class="s s-Atom">clpz</span><span class="p">)).</span>
<span class="p">:-</span> <span class="nf">use_module</span><span class="p">(</span><span class="nf">library</span><span class="p">(</span><span class="s s-Atom">lists</span><span class="p">)).</span>

<span class="nf">sudoku</span><span class="p">(</span><span class="nv">Rows</span><span class="p">)</span> <span class="p">:-</span>
        <span class="nf">length</span><span class="p">(</span><span class="nv">Rows</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="nf">maplist</span><span class="p">(</span><span class="nf">same_length</span><span class="p">(</span><span class="nv">Rows</span><span class="p">),</span> <span class="nv">Rows</span><span class="p">),</span>
        <span class="nf">append</span><span class="p">(</span><span class="nv">Rows</span><span class="p">,</span> <span class="nv">Vs</span><span class="p">),</span> <span class="nv">Vs</span> <span class="s s-Atom">ins</span> <span class="mf">1..9</span><span class="p">,</span>
        <span class="nf">maplist</span><span class="p">(</span><span class="s s-Atom">all_distinct</span><span class="p">,</span> <span class="nv">Rows</span><span class="p">),</span>
        <span class="nf">transpose</span><span class="p">(</span><span class="nv">Rows</span><span class="p">,</span> <span class="nv">Columns</span><span class="p">),</span> <span class="nf">maplist</span><span class="p">(</span><span class="s s-Atom">all_distinct</span><span class="p">,</span> <span class="nv">Columns</span><span class="p">),</span>
        <span class="nv">Rows</span> <span class="o">=</span> <span class="p">[</span><span class="nv">As</span><span class="p">,</span><span class="nv">Bs</span><span class="p">,</span><span class="nv">Cs</span><span class="p">,</span><span class="nv">Ds</span><span class="p">,</span><span class="nv">Es</span><span class="p">,</span><span class="nv">Fs</span><span class="p">,</span><span class="nv">Gs</span><span class="p">,</span><span class="nv">Hs</span><span class="p">,</span><span class="nv">Is</span><span class="p">],</span>
        <span class="nf">blocks</span><span class="p">(</span><span class="nv">As</span><span class="p">,</span> <span class="nv">Bs</span><span class="p">,</span> <span class="nv">Cs</span><span class="p">),</span>
        <span class="nf">blocks</span><span class="p">(</span><span class="nv">Ds</span><span class="p">,</span> <span class="nv">Es</span><span class="p">,</span> <span class="nv">Fs</span><span class="p">),</span>
        <span class="nf">blocks</span><span class="p">(</span><span class="nv">Gs</span><span class="p">,</span> <span class="nv">Hs</span><span class="p">,</span> <span class="nv">Is</span><span class="p">).</span>

<span class="nf">blocks</span><span class="p">([],</span> <span class="p">[],</span> <span class="p">[]).</span>
<span class="nf">blocks</span><span class="p">([</span><span class="nv">N1</span><span class="p">,</span><span class="nv">N2</span><span class="p">,</span><span class="nv">N3</span><span class="p">|</span><span class="nv">Ns1</span><span class="p">],</span> <span class="p">[</span><span class="nv">N4</span><span class="p">,</span><span class="nv">N5</span><span class="p">,</span><span class="nv">N6</span><span class="p">|</span><span class="nv">Ns2</span><span class="p">],</span> <span class="p">[</span><span class="nv">N7</span><span class="p">,</span><span class="nv">N8</span><span class="p">,</span><span class="nv">N9</span><span class="p">|</span><span class="nv">Ns3</span><span class="p">])</span> <span class="p">:-</span>
        <span class="nf">all_distinct</span><span class="p">([</span><span class="nv">N1</span><span class="p">,</span><span class="nv">N2</span><span class="p">,</span><span class="nv">N3</span><span class="p">,</span><span class="nv">N4</span><span class="p">,</span><span class="nv">N5</span><span class="p">,</span><span class="nv">N6</span><span class="p">,</span><span class="nv">N7</span><span class="p">,</span><span class="nv">N8</span><span class="p">,</span><span class="nv">N9</span><span class="p">]),</span>
        <span class="nf">blocks</span><span class="p">(</span><span class="nv">Ns1</span><span class="p">,</span> <span class="nv">Ns2</span><span class="p">,</span> <span class="nv">Ns3</span><span class="p">).</span>

<span class="nf">problem</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[[</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">],</span>
            <span class="p">[</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>
            <span class="p">[</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">],</span>
            <span class="p">[</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">],</span>
            <span class="p">[</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">],</span>
            <span class="p">[</span><span class="k">_</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
            <span class="p">[</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">],</span>
            <span class="p">[</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="k">_</span><span class="p">,</span><span class="mi">9</span><span class="p">]]).</span>
</pre></div>
</div>
<p>Ово решење користи неколико библиотечких предиката.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length(Rows,</span> <span class="pre">9)</span></code> каже да је решење листа дужине 9</p></li>
<li><p>Предикат <code class="docutils literal notranslate"><span class="pre">maplist</span></code> успева ако се први дати аргумент, који је
предикат, успешно примењује на све елементе другог датог
аргумента, који је листа. У овом случају сваки елемент листе
<code class="docutils literal notranslate"><span class="pre">Rows</span></code> мора да има исту дужину као и листа <code class="docutils literal notranslate"><span class="pre">Rows</span></code> (предикат
<code class="docutils literal notranslate"><span class="pre">same_length</span></code> проверава да ли су две дате листе исте дужине).</p></li>
<li><p>Предикатом <code class="docutils literal notranslate"><span class="pre">append(Rows,</span> <span class="pre">Vs)</span></code> се израчунава листа <code class="docutils literal notranslate"><span class="pre">Vs</span></code> која
се добија надовезивањем свих листи из листе <code class="docutils literal notranslate"><span class="pre">Rows</span></code>. Након тога
се оператором <code class="docutils literal notranslate"><span class="pre">ins</span></code> који је део библиотеке за програмирање
ограничења над коначним доменима проглашава да свака променљива у
тој листи има као домен скуп бројева од 1 до 9.</p></li>
<li><p>Предикатом <code class="docutils literal notranslate"><span class="pre">maplist(all_distinct,</span> <span class="pre">Rows)</span></code> се захтева да се свака
врста састоји од различитих бројева (предикат <code class="docutils literal notranslate"><span class="pre">all_distinct</span></code>
који је део поменуте библиотеке то ефикасно проверава).</p></li>
<li><p>Захтев да су елементи сваке колоне сви различити се поставља на
сличан начин, тако што се пре тог захтева матрица транспонује
(мењају се улоге врста и колона) коришћењем библиотечког
предиката <code class="docutils literal notranslate"><span class="pre">transpose</span></code>.</p></li>
<li><p>На крају се манеће услов различитости елемената за сваки квадрат
димензије <span class="math notranslate nohighlight"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-3-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 110%; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/math&gt;" role="presentation"><span id="MJXc-Node-11" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-12" class="mjx-mrow"><span id="MJXc-Node-13" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">3</span></span><span id="MJXc-Node-14" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.23em; padding-bottom: 0.344em;">×</span></span><span id="MJXc-Node-15" class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.401em; padding-bottom: 0.344em;">3</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mo>×</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-3">3\times 3</script></span>. Већ смо разјаснили улогу сваког
библиотечког предиката, па покушај самостално да разумеш како тај
део кода ради.</p></li>
</ul>

    </div></div>
</section>
</section>


    
                <div class="finish-lecture-label" id="finishLectureLabel-8416">Mark activity as completed</div>
                <button type="button" class="finish-lecture-btn not-checked-finish-activity" id="finishLecture-8416" aria-labelledby="MarkLectureComplitedBtn">
                    <img src="/images/check (2) 2@3x.png" alt="Icon for marking the activity as completed">
                </button>
                <div role="button" class="finish-lecture-btn checked-finish-activity d-none" id="checkmark-8416" aria-labelledby="LectureMarkedComplitedBtn">
                    <div class="checked-finish-activity-label">
                        Activity completed!
                    </div>
                    <img src="/images/check (2) 2@3x white.png" alt="Icon indicating the activity is completed">
                </div>
                <div class="lecture-prev-next-toggle">
                    <button type="button" id="prevLecture" class="lecture-toggler-arrows" aria-labelledby="Button to go on previous activity">
                        <span aria-hidden="true">
                            <i class="fas fa-arrow-left fa"></i>
                        </span>
                        <span class="lecture-toggler-arrows-text">Previous activity</span>
                    </button>

                    <button type="button" id="nextLecture" class="lecture-toggler-arrows" aria-labelledby="Button to go on next activity">
                        <span class="lecture-toggler-arrows-text">Next activity</span>
                        <span aria-hidden="true">
                            <i class="fas fa-arrow-right fa"></i>
                        </span>
                    </button>
                </div>
            </div>
</body>
</html>